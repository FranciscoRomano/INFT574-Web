(this.webpackJsonpinft574=this.webpackJsonpinft574||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(9),r=n.n(s),o=n(72),c=(n(85),n(13)),l=n(14),u=n(18),h=n(19),m=n(55),p=n.n(m),f=n(64),g=n(51),d=n.n(g),v=(n(89),n(91),new(function(){function e(){Object(c.a)(this,e),d.a.initializeApp({apiKey:"AIzaSyAN_8ELqyY0KZrzF5eSCzhTshIK2YmxPf4",authDomain:"a1inft574-francisco-romano.firebaseapp.com",databaseURL:"https://a1inft574-francisco-romano.firebaseio.com",projectId:"a1inft574-francisco-romano",storageBucket:"a1inft574-francisco-romano.appspot.com",messagingSenderId:"1099462554424",appId:"1:1099462554424:web:080c0770cfff31ed3347cd",measurementId:"G-VH33V796NC"}),this.auth=d.a.auth(),this.db=d.a.firestore()}return Object(l.a)(e,[{key:"SignIn",value:function(e,t){return this.auth.signInWithEmailAndPassword(e,t)}},{key:"SignOut",value:function(){return this.auth.signOut()}},{key:"SignUp",value:function(){var e=Object(f.a)(p.a.mark((function e(t,n,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.createUserWithEmailAndPassword(n,a);case 2:return e.abrupt("return",this.auth.currentUser.updateProfile({displayName:t}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"Collection",value:function(e){return this.db.collection(e)}},{key:"IsInitialized",value:function(){var e=this;return new Promise((function(t){e.auth.onAuthStateChanged(t)}))}},{key:"User",get:function(){return this.auth.currentUser}},{key:"Username",get:function(){return this.User.displayName}}]),e}())),E=(n(93),n(94),new(function(){function e(){Object(c.a)(this,e),this.collection=v.Collection("messages")}return Object(l.a)(e,[{key:"Add",value:function(e){return this.collection.add({username:v.Username,message:e,timestamp:new Date})}},{key:"Get",value:function(){return this.collection.get()}},{key:"OnSnapshot",value:function(e){return this.collection.onSnapshot(e)}}]),e}())),b=n(132),y=n(71),k=n(142),S=n(136),C=n(68),O=n.n(C),j=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.apply(this,arguments)).state={toggle:!1,anchor:null},a}return Object(l.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"app-chat-head"},i.a.createElement(b.a,{onClick:this.onMenuOpen.bind(this)}," ",i.a.createElement(O.a,null)," "),i.a.createElement(y.a,{className:"app-chat-head-menu",open:this.state.toggle,onClose:this.onMenuClose.bind(this),anchorEl:this.state.anchor},i.a.createElement(k.a,{onClick:this.onMenuClearHistory.bind(this)}," Clear History "),i.a.createElement(k.a,{onClick:this.onMenuSignOut.bind(this)}," Sign Out ")),i.a.createElement("div",null,i.a.createElement(S.a,{variant:"h5"}," Chatroom ")))}},{key:"onMenuOpen",value:function(e){this.setState({toggle:!0,anchor:e.target})}},{key:"onMenuClose",value:function(e){this.setState({toggle:!1})}},{key:"onMenuSignOut",value:function(e){var t=this;v.SignOut().then((function(){console.log("FIREBASE :: sign out was successfull!"),t.props.history.replace("/signin")})).catch((function(e){console.log("FIREBASE ERROR :: sign out was unsuccessfull!",e),t.props.history.replace("/signin")})),this.setState({toggle:!1})}},{key:"onMenuClearHistory",value:function(e){E.Get().then((function(e){e.forEach((function(e){e.data().username===v.Username&&e.ref.delete()}))})),this.setState({toggle:!1})}}]),n}(i.a.Component),w=(n(99),n(137)),I=n(143),F=n(69),R=n.n(F),N=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.apply(this,arguments)).state={input:""},a}return Object(l.a)(n,[{key:"render",value:function(){return i.a.createElement(w.a,{className:"app-chat-input",component:"form"},i.a.createElement(I.a,{style:{flexGrow:1},value:this.state.input,placeholder:"Send Message...",onChange:this.onMsgChange.bind(this)}),i.a.createElement(b.a,{type:"submit",onClick:this.onMsgSubmit.bind(this)}," ",i.a.createElement(R.a,null)," "))}},{key:"onMsgChange",value:function(e){e.preventDefault(),this.setState({input:e.target.value})}},{key:"onMsgSubmit",value:function(e){e.preventDefault(),this.state.input.length&&(console.log("FIREBASE :: sending message..."),E.Add(this.state.input).then((function(){console.log("FIREBASE :: send message was successful!")})).catch((function(e){console.error("FIREBASE ERROR : send message was unsuccessfull!",e)})),this.setState({input:""}))}}]),n}(i.a.Component),A=(n(100),n(101),function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e="app-chat-message "+(this.props.username===v.Username?"right":"left");return i.a.createElement(w.a,{className:e},i.a.createElement(S.a,{variant:"subtitle2"}," ",this.props.username," "),i.a.createElement(S.a,{variant:"body1"}," ",this.props.message," "))}}]),n}(i.a.Component)),U=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.apply(this,arguments)).state={messages:[]},a}return Object(l.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"app-chat-messages"},this.state.messages.map((function(e,t){return i.a.createElement(A,{key:t,username:e.username,message:e.message})})))}},{key:"onMsgSnapshot",value:function(e){var t=[];e.forEach((function(e){t.push(e.data())})),this.setState({messages:t.sort((function(e,t){return e.timestamp-t.timestamp}))})}},{key:"componentDidMount",value:function(){this.snapshot_handle=E.OnSnapshot(this.onMsgSnapshot.bind(this))}},{key:"componentWillUnmount",value:function(){this.snapshot_handle()}}]),n}(i.a.Component),M=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return this.checkUserStatus()?i.a.createElement("div",null,i.a.createElement(j,this.props),i.a.createElement(N,null),i.a.createElement(U,null)):null}},{key:"checkUserStatus",value:function(){return!!v.User||(console.warn("FIREBASE :: you have been signed out!"),this.props.history.replace("signin"),!1)}}]),n}(i.a.Component),B=(n(102),n(106)),x=n(144),T=n(141),P=n(138),z=n(49),D=n.n(z),G=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.apply(this,arguments)).state={email:"",password:""},a}return Object(l.a)(n,[{key:"render",value:function(){return i.a.createElement(B.a,{className:"app-signin"},i.a.createElement("div",{className:"app-signin-head"},i.a.createElement(x.a,null," ",i.a.createElement(D.a,null)," "),i.a.createElement(S.a,{variant:"h4"}," SIGN IN "),i.a.createElement(S.a,{variant:"subtitle2"}," INFT574 Messaging App ")),i.a.createElement("form",{className:"app-signin-form"},i.a.createElement(T.a,{required:!0,label:"Email",variant:"outlined",value:this.state.email,onChange:this.onChangeEmailTextField.bind(this)}),i.a.createElement(T.a,{required:!0,label:"Password",variant:"outlined",type:"password",value:this.state.password,onChange:this.onChangePasswordTextField.bind(this)}),i.a.createElement(P.a,{variant:"contained",size:"large",type:"submit",onClick:this.onClickSubmit.bind(this)}," SUBMIT "),i.a.createElement(P.a,{variant:"outlined",size:"large",onClick:this.onClickSignUp.bind(this)}," SIGN UP ")))}},{key:"onClickSignUp",value:function(e){this.props.history.replace("signup")}},{key:"onClickSubmit",value:function(e){var t=this;e.preventDefault(),console.log("FIREBASE :: signing in..."),v.SignIn(this.state.email,this.state.password).then((function(){console.log("FIREBASE :: sign in was successful!"),t.props.history.replace("/")})).catch((function(e){console.error("FIREBASE ERROR :: sign in was unsuccessful!",e)}))}},{key:"onChangeEmailTextField",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePasswordTextField",value:function(e){this.setState({password:e.target.value})}}]),n}(i.a.Component),q=(n(103),function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.apply(this,arguments)).state={name:"",email:"",password:""},a}return Object(l.a)(n,[{key:"render",value:function(){return i.a.createElement(B.a,{className:"app-signup"},i.a.createElement("div",{className:"app-signup-head"},i.a.createElement(x.a,null," ",i.a.createElement(D.a,null)," "),i.a.createElement(S.a,{variant:"h4"}," SIGN UP "),i.a.createElement(S.a,{variant:"subtitle2"}," INFT574 Messaging App ")),i.a.createElement("form",{className:"app-signup-form"},i.a.createElement(T.a,{required:!0,label:"Name",variant:"outlined",value:this.state.name,onChange:this.onChangeNameTextField.bind(this)}),i.a.createElement(T.a,{required:!0,label:"Email",variant:"outlined",value:this.state.email,onChange:this.onChangeEmailTextField.bind(this)}),i.a.createElement(T.a,{required:!0,label:"Password",variant:"outlined",type:"password",value:this.state.password,onChange:this.onChangePasswordTextField.bind(this)}),i.a.createElement(P.a,{variant:"contained",size:"large",type:"submit",onClick:this.onClickSubmit.bind(this)}," SUBMIT "),i.a.createElement(P.a,{variant:"outlined",size:"large",onClick:this.onClickBack.bind(this)}," BACK ")))}},{key:"onClickBack",value:function(e){this.props.history.replace("signin")}},{key:"onClickSubmit",value:function(e){var t=this;e.preventDefault(),console.log("FIREBASE :: signing up..."),v.SignUp(this.state.name,this.state.email,this.state.password).then((function(){console.log("FIREBASE :: sign up was successful!"),t.props.history.replace("/")})).catch((function(e){console.error("FIREBASE ERROR :: sign up was unsuccessful!",e)}))}},{key:"onChangeNameTextField",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeEmailTextField",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePasswordTextField",value:function(e){this.setState({password:e.target.value})}}]),n}(i.a.Component)),H=n(70),K=n(11),W=n(139),_=n(140);function J(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){v.IsInitialized().then((function(e){s(e)}))})),!1!==n?i.a.createElement("div",null,i.a.createElement(W.a,null),i.a.createElement(H.a,null,i.a.createElement(K.c,null,i.a.createElement(K.a,{path:"/signin",component:G}),i.a.createElement(K.a,{path:"/signup",component:q}),i.a.createElement(K.a,{path:"/",component:M})))):i.a.createElement("div",{id:"loader"},i.a.createElement(_.a,null))}r.a.render(i.a.createElement(J,null),document.getElementById("root"))},80:function(e,t,n){e.exports=n(105)},85:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},99:function(e,t,n){}},[[80,1,2]]]);
//# sourceMappingURL=main.39fb3c46.chunk.js.map