(this.webpackJsonpinft574=this.webpackJsonpinft574||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(9),r=a.n(i),o=a(12),c=a(13),l=a(15),u=a(16),h=(a(88),a(55)),m=a.n(h),p=a(68),f=a(51),g=a.n(f),d=(a(92),a(94),new(function(){function e(){Object(o.a)(this,e),g.a.initializeApp({apiKey:"AIzaSyAN_8ELqyY0KZrzF5eSCzhTshIK2YmxPf4",authDomain:"a1inft574-francisco-romano.firebaseapp.com",databaseURL:"https://a1inft574-francisco-romano.firebaseio.com",projectId:"a1inft574-francisco-romano",storageBucket:"a1inft574-francisco-romano.appspot.com",messagingSenderId:"1099462554424",appId:"1:1099462554424:web:080c0770cfff31ed3347cd",measurementId:"G-VH33V796NC"}),this.auth=g.a.auth(),this.db=g.a.firestore()}return Object(c.a)(e,[{key:"SignIn",value:function(e,t){return this.auth.signInWithEmailAndPassword(e,t)}},{key:"SignOut",value:function(){return this.auth.signOut()}},{key:"SignUp",value:function(){var e=Object(p.a)(m.a.mark((function e(t,a,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.createUserWithEmailAndPassword(a,n);case 2:return e.abrupt("return",this.auth.currentUser.updateProfile({displayName:t}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"Collection",value:function(e){return this.db.collection(e)}},{key:"IsInitialized",value:function(){var e=this;return new Promise((function(t){e.auth.onAuthStateChanged(t)}))}},{key:"User",get:function(){return this.auth.currentUser}},{key:"Username",get:function(){return this.User.displayName}}]),e}())),v=(a(96),a(63),a(64),a(65),a(66),new(function(){function e(){Object(o.a)(this,e),this.collection=d.Collection("messages")}return Object(c.a)(e,[{key:"Add",value:function(e){return this.collection.add({username:d.Username,message:e,timestamp:new Date})}},{key:"Get",value:function(){return this.collection.get()}},{key:"OnSnapshot",value:function(e){return this.collection.onSnapshot(e)}}]),e}())),E=a(131),b=a(75),y=a(140),k=a(135),S=a(72),C=a.n(S),O=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.apply(this,arguments)).state={toggle:!1,anchor:null},n}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"app-chat-head"},s.a.createElement(E.a,{onClick:this.onMenuOpen.bind(this)}," ",s.a.createElement(C.a,null)," "),s.a.createElement(b.a,{className:"app-chat-head-menu",open:this.state.toggle,onClose:this.onMenuClose.bind(this),anchorEl:this.state.anchor},s.a.createElement(y.a,{onClick:this.onMenuClearHistory.bind(this)}," Clear History "),s.a.createElement(y.a,{onClick:this.onMenuSignOut.bind(this)}," Sign Out ")),s.a.createElement("div",null,s.a.createElement(k.a,{variant:"h5"}," Chatroom ")))}},{key:"onMenuOpen",value:function(e){this.setState({toggle:!0,anchor:e.target})}},{key:"onMenuClose",value:function(e){this.setState({toggle:!1})}},{key:"onMenuSignOut",value:function(e){var t=this;d.SignOut().then((function(){console.log("FIREBASE :: sign out was successfull!"),t.props.history.replace("/")})).catch((function(e){console.log("FIREBASE ERROR :: sign out was unsuccessfull!",e),t.props.history.replace("/")})),this.setState({toggle:!1})}},{key:"onMenuClearHistory",value:function(e){v.Get().then((function(e){e.forEach((function(e){e.data().username===d.Username&&e.ref.delete()}))})),this.setState({toggle:!1})}}]),a}(s.a.Component),j=a(136),w=a(141),I=a(73),N=a.n(I),F=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.apply(this,arguments)).state={input:""},n}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement(j.a,{className:"app-chat-input",component:"form"},s.a.createElement(w.a,{style:{flexGrow:1},value:this.state.input,placeholder:"Send Message...",onChange:this.onMsgChange.bind(this)}),s.a.createElement(E.a,{type:"submit",onClick:this.onMsgSubmit.bind(this)}," ",s.a.createElement(N.a,null)," "))}},{key:"onMsgChange",value:function(e){e.preventDefault(),this.setState({input:e.target.value})}},{key:"onMsgSubmit",value:function(e){e.preventDefault(),this.state.input.length&&(console.log("FIREBASE :: sending message..."),v.Add(this.state.input).then((function(){console.log("FIREBASE :: send message was successful!")})).catch((function(e){console.error("FIREBASE ERROR : send message was unsuccessfull!",e)})),this.setState({input:""}))}}]),a}(s.a.Component),R=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e="app-chat-message "+(this.props.username===d.Username?"right":"left");return s.a.createElement(j.a,{className:e},s.a.createElement(k.a,{variant:"subtitle2"}," ",this.props.username," "),s.a.createElement(k.a,{variant:"body1"}," ",this.props.message," "))}}]),a}(s.a.Component),A=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.apply(this,arguments)).state={messages:[]},n}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"app-chat-messages"},this.state.messages.map((function(e,t){return s.a.createElement(R,{key:t,username:e.username,message:e.message})})))}},{key:"onMsgSnapshot",value:function(e){var t=[];e.forEach((function(e){t.push(e.data())})),this.setState({messages:t.sort((function(e,t){return e.timestamp-t.timestamp}))})}},{key:"componentDidMount",value:function(){this.snapshot_handle=v.OnSnapshot(this.onMsgSnapshot.bind(this))}},{key:"componentWillUnmount",value:function(){this.snapshot_handle()}}]),a}(s.a.Component),U=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return this.checkUserStatus()?s.a.createElement("div",null,s.a.createElement(O,this.props),s.a.createElement(F,null),s.a.createElement(A,null)):null}},{key:"checkUserStatus",value:function(){return!!d.User||(console.warn("FIREBASE :: you have been signed out!"),this.props.history.replace("signin"),!1)}}]),a}(s.a.Component),M=(a(101),a(105)),B=a(142),x=a(139),T=a(137),P=a(49),z=a.n(P),D=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.apply(this,arguments)).state={email:"",password:"",error:""},n}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement(M.a,{className:"app-signin"},s.a.createElement("div",{className:"app-signin-head"},s.a.createElement(B.a,null," ",s.a.createElement(z.a,null)," "),s.a.createElement(k.a,{variant:"h4"}," SIGN IN "),s.a.createElement(k.a,{variant:"subtitle2"}," INFT574 Messaging App ")),s.a.createElement("form",{className:"app-signin-form"},s.a.createElement(k.a,{variant:"body1",className:"app-signin-form-error"}," ",this.state.error," "),s.a.createElement(x.a,{required:!0,label:"Email",variant:"outlined",type:"email",value:this.state.email,onChange:this.onChangeEmailTextField.bind(this)}),s.a.createElement(x.a,{required:!0,label:"Password",variant:"outlined",type:"password",value:this.state.password,onChange:this.onChangePasswordTextField.bind(this)}),s.a.createElement(T.a,{variant:"contained",size:"large",type:"submit",onClick:this.onClickSubmit.bind(this)}," SUBMIT "),s.a.createElement(T.a,{variant:"outlined",size:"large",onClick:this.onClickSignUp.bind(this)}," SIGN UP ")))}},{key:"onClickSignUp",value:function(e){this.props.history.replace("/signup")}},{key:"onClickSubmit",value:function(e){var t=this;e.preventDefault(),console.log("FIREBASE :: signing in..."),d.SignIn(this.state.email,this.state.password).then((function(){console.log("FIREBASE :: sign in was successful!"),t.props.history.replace("/chat")})).catch((function(e){t.setState({error:e.message}),console.error("FIREBASE ERROR :: sign in was unsuccessful!",e)}))}},{key:"onChangeEmailTextField",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePasswordTextField",value:function(e){this.setState({password:e.target.value})}}]),a}(s.a.Component),G=(a(102),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.apply(this,arguments)).state={name:"",email:"",password:"",error:""},n}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement(M.a,{className:"app-signup"},s.a.createElement("div",{className:"app-signup-head"},s.a.createElement(B.a,null," ",s.a.createElement(z.a,null)," "),s.a.createElement(k.a,{variant:"h4"}," SIGN UP "),s.a.createElement(k.a,{variant:"subtitle2"}," INFT574 Messaging App ")),s.a.createElement("form",{className:"app-signup-form"},s.a.createElement(k.a,{variant:"body1",className:"app-signin-form-error"}," ",this.state.error," "),s.a.createElement(x.a,{required:!0,label:"Name",variant:"outlined",value:this.state.name,onChange:this.onChangeNameTextField.bind(this)}),s.a.createElement(x.a,{required:!0,label:"Email",variant:"outlined",type:"email",value:this.state.email,onChange:this.onChangeEmailTextField.bind(this)}),s.a.createElement(x.a,{required:!0,label:"Password",variant:"outlined",type:"password",value:this.state.password,onChange:this.onChangePasswordTextField.bind(this)}),s.a.createElement(T.a,{variant:"contained",size:"large",type:"submit",onClick:this.onClickSubmit.bind(this)}," SUBMIT "),s.a.createElement(T.a,{variant:"outlined",size:"large",onClick:this.onClickBack.bind(this)}," BACK ")))}},{key:"onClickBack",value:function(e){this.props.history.replace("/")}},{key:"onClickSubmit",value:function(e){var t=this;e.preventDefault(),console.log("FIREBASE :: signing up..."),d.SignUp(this.state.name,this.state.email,this.state.password).then((function(){console.log("FIREBASE :: sign up was successful!"),t.props.history.replace("/chat")})).catch((function(e){t.setState({error:e.message}),console.error("FIREBASE ERROR :: sign up was unsuccessful!",e)}))}},{key:"onChangeNameTextField",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeEmailTextField",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePasswordTextField",value:function(e){this.setState({password:e.target.value})}}]),a}(s.a.Component)),q=a(74),H=a(11),K=a(138),W=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(K.a,null),s.a.createElement(q.a,{basename:"/INFT574-Web"},s.a.createElement(H.c,null,s.a.createElement(H.a,{exact:!0,path:"/",component:D}),s.a.createElement(H.a,{exact:!0,path:"/chat",component:U}),s.a.createElement(H.a,{exact:!0,path:"/signup",component:G}))))}}]),a}(s.a.Component);r.a.render(s.a.createElement(W,null),document.getElementById("root"))},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},83:function(e,t,a){e.exports=a(104)},88:function(e,t,a){},96:function(e,t,a){}},[[83,1,2]]]);
//# sourceMappingURL=main.db96b3d3.chunk.js.map