(this.webpackJsonpinft574=this.webpackJsonpinft574||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(9),r=n.n(s),o=n(12),c=n(13),u=n(15),l=n(16),h=(n(84),n(55)),p=n.n(h),m=n(64),f=n(51),g=n.n(f),d=(n(88),n(90),new(function(){function e(){Object(o.a)(this,e),g.a.initializeApp({apiKey:"AIzaSyAN_8ELqyY0KZrzF5eSCzhTshIK2YmxPf4",authDomain:"a1inft574-francisco-romano.firebaseapp.com",databaseURL:"https://a1inft574-francisco-romano.firebaseio.com",projectId:"a1inft574-francisco-romano",storageBucket:"a1inft574-francisco-romano.appspot.com",messagingSenderId:"1099462554424",appId:"1:1099462554424:web:080c0770cfff31ed3347cd",measurementId:"G-VH33V796NC"}),this.auth=g.a.auth(),this.db=g.a.firestore()}return Object(c.a)(e,[{key:"SignIn",value:function(e,t){return this.auth.signInWithEmailAndPassword(e,t)}},{key:"SignOut",value:function(){return this.auth.signOut()}},{key:"SignUp",value:function(){var e=Object(m.a)(p.a.mark((function e(t,n,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.createUserWithEmailAndPassword(n,a);case 2:return e.abrupt("return",this.auth.currentUser.updateProfile({displayName:t}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"Collection",value:function(e){return this.db.collection(e)}},{key:"IsInitialized",value:function(){var e=this;return new Promise((function(t){e.auth.onAuthStateChanged(t)}))}},{key:"User",get:function(){return this.auth.currentUser}},{key:"Username",get:function(){return this.User.displayName}}]),e}())),v=(n(92),n(93),new(function(){function e(){Object(o.a)(this,e),this.collection=d.Collection("messages")}return Object(c.a)(e,[{key:"Add",value:function(e){return this.collection.add({username:d.Username,message:e,timestamp:new Date})}},{key:"Get",value:function(){return this.collection.get()}},{key:"OnSnapshot",value:function(e){return this.collection.onSnapshot(e)}}]),e}())),E=n(131),b=n(71),y=n(140),k=n(135),S=n(68),C=n.n(S),O=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.apply(this,arguments)).state={toggle:!1,anchor:null},a}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"app-chat-head"},i.a.createElement(E.a,{onClick:this.onMenuOpen.bind(this)}," ",i.a.createElement(C.a,null)," "),i.a.createElement(b.a,{className:"app-chat-head-menu",open:this.state.toggle,onClose:this.onMenuClose.bind(this),anchorEl:this.state.anchor},i.a.createElement(y.a,{onClick:this.onMenuClearHistory.bind(this)}," Clear History "),i.a.createElement(y.a,{onClick:this.onMenuSignOut.bind(this)}," Sign Out ")),i.a.createElement("div",null,i.a.createElement(k.a,{variant:"h5"}," Chatroom ")))}},{key:"onMenuOpen",value:function(e){this.setState({toggle:!0,anchor:e.target})}},{key:"onMenuClose",value:function(e){this.setState({toggle:!1})}},{key:"onMenuSignOut",value:function(e){var t=this;d.SignOut().then((function(){console.log("FIREBASE :: sign out was successfull!"),t.props.history.replace("/signin")})).catch((function(e){console.log("FIREBASE ERROR :: sign out was unsuccessfull!",e),t.props.history.replace("/signin")})),this.setState({toggle:!1})}},{key:"onMenuClearHistory",value:function(e){v.Get().then((function(e){e.forEach((function(e){e.data().username===d.Username&&e.ref.delete()}))})),this.setState({toggle:!1})}}]),n}(i.a.Component),j=(n(98),n(136)),w=n(141),I=n(69),F=n.n(I),R=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.apply(this,arguments)).state={input:""},a}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement(j.a,{className:"app-chat-input",component:"form"},i.a.createElement(w.a,{style:{flexGrow:1},value:this.state.input,placeholder:"Send Message...",onChange:this.onMsgChange.bind(this)}),i.a.createElement(E.a,{type:"submit",onClick:this.onMsgSubmit.bind(this)}," ",i.a.createElement(F.a,null)," "))}},{key:"onMsgChange",value:function(e){e.preventDefault(),this.setState({input:e.target.value})}},{key:"onMsgSubmit",value:function(e){e.preventDefault(),this.state.input.length&&(console.log("FIREBASE :: sending message..."),v.Add(this.state.input).then((function(){console.log("FIREBASE :: send message was successful!")})).catch((function(e){console.error("FIREBASE ERROR : send message was unsuccessfull!",e)})),this.setState({input:""}))}}]),n}(i.a.Component),N=(n(99),n(100),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e="app-chat-message "+(this.props.username===d.Username?"right":"left");return i.a.createElement(j.a,{className:e},i.a.createElement(k.a,{variant:"subtitle2"}," ",this.props.username," "),i.a.createElement(k.a,{variant:"body1"}," ",this.props.message," "))}}]),n}(i.a.Component)),A=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.apply(this,arguments)).state={messages:[]},a}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"app-chat-messages"},this.state.messages.map((function(e,t){return i.a.createElement(N,{key:t,username:e.username,message:e.message})})))}},{key:"onMsgSnapshot",value:function(e){var t=[];e.forEach((function(e){t.push(e.data())})),this.setState({messages:t.sort((function(e,t){return e.timestamp-t.timestamp}))})}},{key:"componentDidMount",value:function(){this.snapshot_handle=v.OnSnapshot(this.onMsgSnapshot.bind(this))}},{key:"componentWillUnmount",value:function(){this.snapshot_handle()}}]),n}(i.a.Component),U=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return this.checkUserStatus()?i.a.createElement("div",null,i.a.createElement(O,this.props),i.a.createElement(R,null),i.a.createElement(A,null)):null}},{key:"checkUserStatus",value:function(){return!!d.User||(console.warn("FIREBASE :: you have been signed out!"),this.props.history.replace("signin"),!1)}}]),n}(i.a.Component),M=(n(101),n(105)),B=n(142),x=n(139),T=n(137),P=n(49),z=n.n(P),D=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.apply(this,arguments)).state={email:"",password:""},a}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement(M.a,{className:"app-signin"},i.a.createElement("div",{className:"app-signin-head"},i.a.createElement(B.a,null," ",i.a.createElement(z.a,null)," "),i.a.createElement(k.a,{variant:"h4"}," SIGN IN "),i.a.createElement(k.a,{variant:"subtitle2"}," INFT574 Messaging App ")),i.a.createElement("form",{className:"app-signin-form"},i.a.createElement(x.a,{required:!0,label:"Email",variant:"outlined",value:this.state.email,onChange:this.onChangeEmailTextField.bind(this)}),i.a.createElement(x.a,{required:!0,label:"Password",variant:"outlined",type:"password",value:this.state.password,onChange:this.onChangePasswordTextField.bind(this)}),i.a.createElement(T.a,{variant:"contained",size:"large",type:"submit",onClick:this.onClickSubmit.bind(this)}," SUBMIT "),i.a.createElement(T.a,{variant:"outlined",size:"large",onClick:this.onClickSignUp.bind(this)}," SIGN UP ")))}},{key:"onClickSignUp",value:function(e){this.props.history.replace("signup")}},{key:"onClickSubmit",value:function(e){var t=this;e.preventDefault(),console.log("FIREBASE :: signing in..."),d.SignIn(this.state.email,this.state.password).then((function(){console.log("FIREBASE :: sign in was successful!"),t.props.history.replace("/")})).catch((function(e){console.error("FIREBASE ERROR :: sign in was unsuccessful!",e)}))}},{key:"onChangeEmailTextField",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePasswordTextField",value:function(e){this.setState({password:e.target.value})}}]),n}(i.a.Component),G=(n(102),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.apply(this,arguments)).state={name:"",email:"",password:""},a}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement(M.a,{className:"app-signup"},i.a.createElement("div",{className:"app-signup-head"},i.a.createElement(B.a,null," ",i.a.createElement(z.a,null)," "),i.a.createElement(k.a,{variant:"h4"}," SIGN UP "),i.a.createElement(k.a,{variant:"subtitle2"}," INFT574 Messaging App ")),i.a.createElement("form",{className:"app-signup-form"},i.a.createElement(x.a,{required:!0,label:"Name",variant:"outlined",value:this.state.name,onChange:this.onChangeNameTextField.bind(this)}),i.a.createElement(x.a,{required:!0,label:"Email",variant:"outlined",value:this.state.email,onChange:this.onChangeEmailTextField.bind(this)}),i.a.createElement(x.a,{required:!0,label:"Password",variant:"outlined",type:"password",value:this.state.password,onChange:this.onChangePasswordTextField.bind(this)}),i.a.createElement(T.a,{variant:"contained",size:"large",type:"submit",onClick:this.onClickSubmit.bind(this)}," SUBMIT "),i.a.createElement(T.a,{variant:"outlined",size:"large",onClick:this.onClickBack.bind(this)}," BACK ")))}},{key:"onClickBack",value:function(e){this.props.history.replace("signin")}},{key:"onClickSubmit",value:function(e){var t=this;e.preventDefault(),console.log("FIREBASE :: signing up..."),d.SignUp(this.state.name,this.state.email,this.state.password).then((function(){console.log("FIREBASE :: sign up was successful!"),t.props.history.replace("/")})).catch((function(e){console.error("FIREBASE ERROR :: sign up was unsuccessful!",e)}))}},{key:"onChangeNameTextField",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeEmailTextField",value:function(e){this.setState({email:e.target.value})}},{key:"onChangePasswordTextField",value:function(e){this.setState({password:e.target.value})}}]),n}(i.a.Component)),q=n(70),H=n(11),K=n(138),W=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(K.a,null),i.a.createElement(q.a,null,i.a.createElement(H.c,null,i.a.createElement(H.a,{exact:!0,path:"/",component:U}),i.a.createElement(H.a,{path:"/signin",component:D}),i.a.createElement(H.a,{path:"/signup",component:G}))))}},{key:"componentDidMount",value:function(){}}]),n}(i.a.Component);r.a.render(i.a.createElement(W,null),document.getElementById("root"))},79:function(e,t,n){e.exports=n(104)},84:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[79,1,2]]]);
//# sourceMappingURL=main.1f601280.chunk.js.map